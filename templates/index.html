<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Track and compare rental properties in the Seattle area">
    <title>Rental Property Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="container">
        <h1>Rental Properties</h1>
        <div class="action-bar">
            <a href="{{ url_for('add_property') }}" class="button"><i class="fas fa-plus-circle"></i> Add New Property</a>
            <a href="{{ url_for('export_data') }}" class="button secondary"><i class="fas fa-file-export"></i> Export Data</a>
        </div>
        
        <div class="search-container">
            <h2>Search Properties</h2>
            <form action="{{ url_for('search') }}" method="get">
                <div class="search-row">
                    <div class="search-field">
                        <label for="min_price"><i class="fas fa-dollar-sign"></i> Min Price:</label>
                        <input type="number" id="min_price" name="min_price" placeholder="Minimum" value="{{ request.args.get('min_price', '') }}">
                    </div>
                    <div class="search-field">
                        <label for="max_price"><i class="fas fa-dollar-sign"></i> Max Price:</label>
                        <input type="number" id="max_price" name="max_price" placeholder="Maximum" value="{{ request.args.get('max_price', '') }}">
                    </div>
                    <div class="search-field">
                        <label for="min_bedrooms"><i class="fas fa-bed"></i> Min Bedrooms:</label>
                        <input type="number" id="min_bedrooms" name="min_bedrooms" placeholder="Minimum" value="{{ request.args.get('min_bedrooms', '') }}">
                    </div>
                </div>
                
                <div class="search-row">
                    <div class="search-field">
                        <label for="property_type"><i class="fas fa-home"></i> Property Type:</label>
                        <select id="property_type" name="property_type">
                            <option value="">Any Type</option>
                            <option value="Home" {% if request.args.get('property_type') == 'Home' %}selected{% endif %}>Home</option>
                            <option value="Apartment" {% if request.args.get('property_type') == 'Apartment' %}selected{% endif %}>Apartment</option>
                            <option value="Townhome" {% if request.args.get('property_type') == 'Townhome' %}selected{% endif %}>Townhome</option>
                        </select>
                    </div>
                </div>
                
                <div class="checkbox-row">
                    <div class="checkbox-field">
                        <input type="checkbox" id="cat_friendly" name="cat_friendly" value="1" {% if request.args.get('cat_friendly') %}checked{% endif %}>
                        <label for="cat_friendly"><i class="fas fa-cat"></i> Cat Friendly</label>
                    </div>
                    <div class="checkbox-field">
                        <input type="checkbox" id="air_conditioning" name="air_conditioning" value="1" {% if request.args.get('air_conditioning') %}checked{% endif %}>
                        <label for="air_conditioning"><i class="fas fa-snowflake"></i> Air Conditioning</label>
                    </div>
                </div>
                
                <div class="search-actions">
                    <button type="submit" class="search-button"><i class="fas fa-search"></i> Search</button>
                </div>
                <div class="search-actions" style="margin-top: 10px;">
                    <a href="{{ url_for('index') }}" class="button secondary"><i class="fas fa-times-circle"></i> Clear Filters</a>
                </div>
            </form>
        </div>
        <div class="property-list">
            {% for property in properties %}
            <div class="property-card">
                <h2><i class="fas fa-map-marker-alt"></i> {{ property.address }}</h2>
                <div class="price">${{ property.price | int }} / month</div>
                
                <p><span><i class="fas fa-home"></i> Type:</span> <span>{{ property.property_type }}</span></p>
                <p><span><i class="fas fa-ruler-combined"></i> Size:</span> <span>{{ property.sq_ft }} sq ft</span></p>
                <p><span><i class="fas fa-bed"></i> Bedrooms:</span> <span>{{ property.num_bedrooms }}</span></p>
                <p><span><i class="fas fa-car"></i> Parking:</span> <span>{{ property.parking_type }}</span></p>
                
                <div class="property-features">
                    {% if property.cat_friendly %}
                    <span class="feature-tag positive"><i class="fas fa-cat"></i> Cat Friendly</span>
                    {% endif %}
                    {% if property.air_conditioning %}
                    <span class="feature-tag positive"><i class="fas fa-snowflake"></i> AC</span>
                    {% endif %}
                </div>
                
                <div class="commute-info">
                    <p><span><i class="fas fa-clock"></i> Morning Commute:</span> <span>{{ property.commute_morning }}</span></p>
                    <p><span><i class="fas fa-clock"></i> Midday Commute:</span> <span>{{ property.commute_midday }}</span></p>
                    <p><span><i class="fas fa-clock"></i> Evening Commute:</span> <span>{{ property.commute_evening }}</span></p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</body>
</html>
